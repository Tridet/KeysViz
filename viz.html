<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width,initial-scale=1" name="viewport">
  <meta content="description" name="description">
  <meta name="google" content="notranslate" />
  <meta content="Mashup templates have been developped by Orson.io team" name="author">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="functions/barchart_right.js"></script>
  <script src="functions/barchart_left.js"></script>
  <script src="functions/stroke2freq.js"></script>
  <script src="functions/data_filter.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0;}
  </style>

  <meta name="msapplication-tap-highlight" content="no">
  
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-icon-180x180.png">
  <link href="./assets/favicon.ico" rel="icon">

  <title>KeysViz Project</title>  

<link href="./main.3f6952e4.css" rel="stylesheet"></head>

<body>
<header>
  <nav class="navbar  navbar-fixed-top navbar-default">
    <div class="container">
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav ">
          <li><a href="./index.html" title="">01 : Home</a></li>
          <li><a href="./viz.html" title="">02 : Visualizations</a></li>
          <li><a href="./about.html" title="">03 : About the project</a></li>
        </ul>
      </div> 
    </div>
  </nav>
</header>

<div>

  <form id="form" align="right" position="relative">
      </br>
      &nbsp;Sorting layout:
      <label><input type="radio" name="layout" value="descending" checked> Frequency&nbsp;</label>
      <label><input type="radio" name="layout" value="alphabetical"> Alphabetical &nbsp;</label>
  </form>

  <script>

  var topHeight = Math.max(document.getElementById("navbar-collapse").offsetHeight,document.getElementById("form").offsetHeight);
  var outerWidth = $(window).width();//window.innerWidth
  var screen_w = screen.width;
  var ratio_w = outerWidth/screen_w;
  var outerHeight = $(window).height()-topHeight;
  var screen_h = screen.height;
  var ratio_h = outerHeight/screen_h;
  var ratio = Math.min(ratio_h, ratio_w);
  var margin = {top: 0.04*outerWidth, right: 0.06*outerWidth, bottom:0.04*outerWidth, left: 0.06*outerWidth};

  var innerWidth = outerWidth/2 - margin.left - margin.right;
  var innerHeight = outerHeight - margin.top - margin.bottom;

  //Create the SVG


  //var parseDate = d3.timeParse("%Y-%m-%d %H:%M:%S,%L");
  //var displayDate = d3.timeFormat("%Y-%m-%d %H:%M:%S,%L");

  function plot(alph){
    
  var svg = d3.select("body").append("svg")
  .attr("id","svg_id")
  .attr("width", outerWidth)
  .attr("height", outerHeight);

  var g = svg.append("g")
  .attr("transform", "translate(" + margin.right*0.6 + "," + (margin.top) + ")");

  var g1 = svg.append("g")
  .attr("transform", "translate(" + (outerWidth/2 + margin.left) + "," +  (margin.top) + ")");
  data_path = 'https://raw.githubusercontent.com/Tridet/KeysViz/master/data.json'
  d3.json(data_path, function(json){
      var data = json;
      var filter_count = 30;
      var w = innerWidth;
      var h = innerHeight;
      var color = 'salmon';
      var alphabetical = alph;

      var elt_left = g;
      var main_key_left = 'd3';
      barchart_left(elt_left, data, main_key_left, filter_count, w, h, ratio, color, alphabetical);
      //d3.select("input[value=\"descending\"]").on("click", barchart_left(g, data, 30, innerWidth, innerHeight, "salmon",false));
      //d3.select("input[value=\"alphabetical\"]").on("click", barchart_left(g, data, 30, innerWidth, innerHeight, "salmon",true));

      var elt_right = g1;
      var main_key_right = 'philosophy';
      barchart_right(elt_right, data, main_key_right, filter_count, w, h, ratio, color, alphabetical);
      //d3.select("input[value=\"descending\"]").on("click", barchart_left(g, data, 30, innerWidth, innerHeight, "salmon",false));
      //d3.select("input[value=\"alphabetical\"]").on("click", barchart_left(g, data, 30, innerWidth, innerHeight, "salmon",true));
  });

}


plot(false);

d3.select("input[value=\"descending\"]").on("click", function(){d3.select("#svg_id").remove();
  plot(false);});
d3.select("input[value=\"alphabetical\"]").on("click",  function(){d3.select("#svg_id").remove();
  plot(true);});

  </script>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function (event) {
     navActivePage();
  });
</script>
<script type="text/javascript" src="./main.70a66962.js"></script></body>

</html>
